在本练习中，您将实现正则化线性回归，并使用它来研究具有不同偏差-方差属性的模型。
在练习的前半部分，您将使用水库水位的变化实现正则化线性回归来预测大坝的出水量。
在下半部分中，您将对调试学习算法进行诊断，并检查偏差和方差的影响。

关于数据：
本次的数据是以.mat格式储存的，x表示水位的变化，y表示大坝的出水量。
数据集共分为三部分：训练集（X, y）、交叉验证集（Xval, yval）和测试集（Xtest, ytest）。

2）知识点概括：
在新的数据集中可能之前训练的模型表现不好，误差很大，这时可以采取的方法有：
1.得到更多的训练样本——对高方差问题有效（可以通过画出学习曲线观察训练误差和验证误差之间的差距）
2.减少特征——对高方差问题有效
3.增加特征——对高偏差问题有效
4.增加多项式——对高偏差问题有效
5.增大惩罚系数——对高方差问题有效
6.减小惩罚系数——对高偏差问题有效

训练集、验证集、测试集（6：2：2）：
训练数据集：训练模型；（习得模型的参数）
验证数据集：验证模型的效果；如果模型的效果不好，则重新调整参数再次训练新的模型，直到找到了一组参数，使得模型针对验证数据集来说已经达到最优了；（将每个训练集训练好的参数在交叉验证集上计算交叉验证误差，选择误差最小的那个假设作为我们的模型，这里是用来选择lmd）
测试数据集：将此数据集传入由验证数据集得到的最佳模型，得到模型最终的性能；（作为衡量最终模型性能的数据集）

诊断偏差与方差（欠拟合或过拟合）：
高偏差问题high bias problem（高偏差/欠拟合）对应情况：训练误差和验证误差都较大，验证误差可能约大或者约等于训练误差
高方差问题high variance problem（高方差/过拟合）对应情况：训练误差小，但验证误差大，验证误差远大于训练误差

正则化：
惩罚系数过大使得欠拟合
惩罚系数过小使得过拟合

学习曲线（learning curves）：
在高偏差问题中，验证误差随着样本数量的增加而减小，但是减小到一定程度后基本上趋于稳定，
因为此时拟合的曲线已经模拟的很好了（也可以从训练误差与验证误差很接近看出），这时的误差基本上是由于模型本身设定导致的，
而不是样本数量少的关系，这时意味着增加样本数量对于优化模型没有帮助。

在高方差问题中，因为过拟合所以验证误差不会减少太多、训练误差也不会增加太多，
导致训练误差和验证误差之间差距较大，但随着样本数量增加，这个差距会减少，
也就是说这时增加样本数量对于改进算法是有帮助的。

误差分析：
建议的方法：首先尽快做出一个算法并且实现，计算出验证误差；画出学习曲线来观察如何提升这个模型；
误差分析，手动观察被分类错误的样本，启发找出其他特征。
在分析评价模型时需要一个数值的评价（例如错误率、精确度等)

3）大致步骤：
1.首先读取mat数据，然后可视化训练集数据。其次写出正则化的代价函数，
当惩罚系数为1、theta初值为[1, 1]时检验代价函数应该为303.993。
再写出正则化的梯度函数，同样带入检查值应为[-15.30, 598.250]。然后使用牛顿共轭梯度fmin_ncg求最优解theta，再画出拟合曲线。
2.画出学习曲线，对偏差-方差问题进行诊断。样本数量从1个到12依次递增，然后对每次不同数量的样本集进行训练，
产生一个模型（也就是训练好参数）再用这个样本集计算出训练误差，用交叉验证集全体计算出验证误差，画出学习曲线。
3.进行特征映射，产生x 2 , x 3 , x 4 等高阶项，再进行标准化，
之后再将第一列的常数项加上去（不然先加标准化之后会出现除以0的情况，产生nan）这里需要对训练集和验证集都做处理。
（注意这里作业要求展开到8阶项，但是后来画图之后发现8阶的与作业中图不符，应该是6阶才对）然后开始训练模型，
利用之前的函数，这里设置lmd=0，即不添加正则项。然后画出拟合的曲线以及学习曲线。
（在画拟合曲线时候注意用训练集的均值和标准差进行标准化）
4.调整正则化参数。分别令lmd=1和100，查看拟合曲线以及学习曲线。
之后用验证集选择lmd。（注意在计算训练误差和验证误差的时候都应该把代价函数中的lmd设置为0）
即变化lmd得到模型的训练误差和验证误差，选择验证误差最小的那个模型。然后使用测试集计算选出的这个模型的测试误差。


4）关于Python：
1.np.sum( , axis=0)可以列求和。
2.np.c_[ ]可以合并矩阵，但注意是方括号。
3.np.flatten( )可以返回一个折叠成一维的数组。但是该函数只能适用于numpy对象，即array或者mat，普通的list列表是不行的。
也就是说可以将shape为(12, 1)的返回为(12, )。
4.np.std(x, axis=0, ddof=1) axis=0计算每一列的标准差，ddof=1表示自由度为N-1，因为无偏的样本方差为s 2 = 1 

